<template>
  <div class="analysis-process-page">
    <div class="report-content">
      <div class="report-header">
        <h3>ğŸ“Š è‚¡ç¥¨åˆ†ææµç¨‹è¯´æ˜</h3>
      </div>
      <div 
        class="markdown-content"
        v-html="renderedContent"
      ></div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { marked } from 'marked'
import DOMPurify from 'dompurify'
// å¯¼å…¥ç¾Šçš®çº¸é£æ ¼çš„æ ·å¼æ–‡ä»¶ï¼Œæä¾›å®Œæ•´çš„ markdown æ¸²æŸ“æ ·å¼
import '../styles/markdown-render-paper.css'

const markdownContent = ref(`### ğŸ”„ å®Œæ•´åˆ†ææµç¨‹

æœ¬ç³»ç»Ÿé‡‡ç”¨å¤šAgentååŒåˆ†ææ¶æ„ï¼Œä¸ºæ‚¨æä¾›å…¨é¢çš„è‚¡ç¥¨æŠ•èµ„åˆ†æã€‚ç³»ç»Ÿä¼šå®æ—¶ä¿å­˜æ¯æ­¥æ‰§è¡Œè¾“å‡ºï¼Œä¾¿äºè¿½è¸ªå’Œè°ƒè¯•ã€‚

#### **ç¬¬ä¸€é˜¶æ®µï¼šé…ç½®ä¸å‡†å¤‡** ğŸ¯ (æ­¥éª¤1-8)

1. **åˆ†æå¯åŠ¨** ğŸš€
   - è®°å½•åˆ†æå¼€å§‹æ—¥å¿—
   - åˆå§‹åŒ–åˆ†æä¼šè¯ID

2. **æˆæœ¬ä¼°ç®—** ğŸ’°
   - æ ¹æ®é€‰æ‹©çš„åˆ†æå¸ˆå’Œç ”ç©¶æ·±åº¦ä¼°ç®—åˆ†ææˆæœ¬
   - æ˜¾ç¤ºé¢„ä¼°çš„Tokenä½¿ç”¨é‡å’Œè´¹ç”¨

3. **æ•°æ®é¢„è·å–å’ŒéªŒè¯** ğŸ”
   - éªŒè¯è‚¡ç¥¨ä»£ç æ ¼å¼å’Œæœ‰æ•ˆæ€§
   - é¢„è·å–è‚¡ç¥¨åŸºç¡€æ•°æ®ï¼ˆ30å¤©å†å²æ•°æ®ï¼‰
   - ç¼“å­˜æ•°æ®ä»¥æé«˜åç»­åˆ†ææ•ˆç‡

4. **ç¯å¢ƒéªŒè¯** ğŸ”§
   - æ£€æŸ¥APIå¯†é’¥é…ç½®ï¼ˆDASHSCOPE_API_KEYã€FINNHUB_API_KEYç­‰ï¼‰
   - éªŒè¯å¿…è¦çš„ç¯å¢ƒå˜é‡

5. **æ„å»ºé…ç½®** âš™ï¸
   - æ ¹æ®é€‰æ‹©çš„LLMæä¾›å•†å’Œæ¨¡å‹æ„å»ºé…ç½®
   - è®¾ç½®ç ”ç©¶æ·±åº¦ã€å¸‚åœºç±»å‹ç­‰å‚æ•°

6. **æ ¼å¼åŒ–è‚¡ç¥¨ä»£ç ** ğŸ“
   - æ ¹æ®å¸‚åœºç±»å‹æ ¼å¼åŒ–è‚¡ç¥¨ä»£ç ï¼ˆAè‚¡/æ¸¯è‚¡/ç¾è‚¡ï¼‰
   - ç¡®ä¿ä»£ç æ ¼å¼ç¬¦åˆæ•°æ®æºè¦æ±‚

7. **åˆå§‹åŒ–åˆ†æå¼•æ“** ğŸ—ï¸
   - åˆ›å»ºTradingAgentsGraphå®ä¾‹
   - åˆå§‹åŒ–æ‰€æœ‰æ™ºèƒ½ä½“å’Œå·¥å…·èŠ‚ç‚¹
   - é…ç½®æ¨¡æ‹Ÿæ¨¡å¼ï¼ˆå¦‚æœå¯ç”¨ï¼‰

8. **æ­¥éª¤è¾“å‡ºç›®å½•å‡†å¤‡** ğŸ“
   - åˆ›å»ºæ­¥éª¤è¾“å‡ºä¿å­˜ç›®å½•
   - å‡†å¤‡ä¿å­˜æ¯æ­¥æ‰§è¡Œç»“æœ

#### **ç¬¬äºŒé˜¶æ®µï¼šå¤šæ™ºèƒ½ä½“åˆ†ææ‰§è¡Œ** ğŸ” (æ­¥éª¤9)

ç³»ç»Ÿä½¿ç”¨LangGraphæ¡†æ¶æ‰§è¡Œå¤šæ™ºèƒ½ä½“åä½œåˆ†æï¼Œ**æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºéƒ½ä¼šè¢«å®æ—¶ä¿å­˜**ï¼š

**ğŸ“Š åˆ†æå¸ˆå›¢é˜Ÿé˜¶æ®µ**ï¼ˆæ ¹æ®æ‚¨é€‰æ‹©çš„åˆ†æå¸ˆï¼Œé¡ºåºæ‰§è¡Œï¼‰

- **ğŸ“ˆ å¸‚åœºåˆ†æå¸ˆ (Market Analyst)**
  - æŠ€æœ¯é¢åˆ†æï¼šKçº¿å½¢æ€ã€å‡çº¿ç³»ç»Ÿã€ä»·æ ¼è¶‹åŠ¿
  - æŠ€æœ¯æŒ‡æ ‡åˆ†æï¼šMACDã€RSIã€KDJã€å¸ƒæ—å¸¦ç­‰
  - æ”¯æ’‘é˜»åŠ›ä½åˆ†æã€æˆäº¤é‡åˆ†æ
  - **è¾“å‡ºä¿å­˜**ï¼š\`market_report\` å­—æ®µ

- **ğŸ’° åŸºæœ¬é¢åˆ†æå¸ˆ (Fundamentals Analyst)**
  - è´¢åŠ¡æ•°æ®åˆ†æï¼šè¥æ”¶ã€åˆ©æ¶¦ã€ç°é‡‘æµã€è´¢åŠ¡æ¯”ç‡
  - å…¬å¸åŸºæœ¬é¢ç ”ç©¶ï¼šä¸šåŠ¡æ¨¡å¼ã€ç«äº‰ä¼˜åŠ¿
  - ä¼°å€¼æ°´å¹³è¯„ä¼°ï¼šPEã€PBã€PSã€ROEç­‰ä¼°å€¼æŒ‡æ ‡
  - **è¾“å‡ºä¿å­˜**ï¼š\`fundamentals_report\` å­—æ®µ

- **ğŸ“° æ–°é—»åˆ†æå¸ˆ (News Analyst)**
  - æ–°é—»äº‹ä»¶æ”¶é›†ï¼šç›¸å…³æ–°é—»æŠ“å–å’Œç­›é€‰
  - äº‹ä»¶å½±å“åˆ†æï¼šé‡å¤§äº‹ä»¶å¯¹è‚¡ä»·çš„å½±å“è¯„ä¼°
  - å¸‚åœºåŠ¨æ€è¿½è¸ªï¼šè¡Œä¸šåŠ¨æ€ã€æ”¿ç­–å˜åŒ–
  - **è¾“å‡ºä¿å­˜**ï¼š\`news_report\` å­—æ®µ

- **ğŸ’­ ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ (Social Media Analyst)**ï¼ˆéAè‚¡å¸‚åœºï¼‰
  - ç¤¾äº¤åª’ä½“æ•°æ®é‡‡é›†ï¼šRedditã€Twitterç­‰å¹³å°
  - æŠ•èµ„è€…æƒ…ç»ªåˆ†æï¼šæ•£æˆ·æƒ…ç»ªã€æœºæ„è§‚ç‚¹
  - çƒ­åº¦æŒ‡æ ‡ç›‘æµ‹ï¼šè®¨è®ºçƒ­åº¦ã€å…³æ³¨åº¦å˜åŒ–
  - **è¾“å‡ºä¿å­˜**ï¼š\`sentiment_report\` å­—æ®µ

**ğŸ¯ ç ”ç©¶å‘˜è¾©è®ºé˜¶æ®µ**ï¼ˆç ”ç©¶æ·±åº¦â‰¥2æ—¶æ‰§è¡Œï¼‰

- **ğŸ‚ çœ‹æ¶¨ç ”ç©¶å‘˜ (Bull Researcher)**
  - ä»ä¹è§‚è§’åº¦åˆ†ææŠ•èµ„æœºä¼š
  - è¾“å‡ºçœ‹æ¶¨è§‚ç‚¹å’ŒæŠ•èµ„ç†ç”±
  - **è¾“å‡ºä¿å­˜**ï¼š\`investment_debate_state.bull_history\`

- **ğŸ» çœ‹è·Œç ”ç©¶å‘˜ (Bear Researcher)**
  - ä»è°¨æ…è§’åº¦åˆ†ææŠ•èµ„é£é™©
  - è¾“å‡ºçœ‹è·Œè§‚ç‚¹å’Œé£é™©æé†’
  - **è¾“å‡ºä¿å­˜**ï¼š\`investment_debate_state.bear_history\`

- **ğŸ‘” ç ”ç©¶ç»ç† (Research Manager)**
  - ç»¼åˆå¤šå¤´å’Œç©ºå¤´è§‚ç‚¹
  - åšå‡ºç»¼åˆæŠ•èµ„åˆ¤æ–­
  - **è¾“å‡ºä¿å­˜**ï¼š\`investment_debate_state.judge_decision\`ã€\`investment_plan\`

**ğŸ’¼ äº¤æ˜“é˜¶æ®µ**

- **äº¤æ˜“å‘˜ (Trader)**
  - åŸºäºç ”ç©¶ç»“æœåˆ¶å®šäº¤æ˜“è®¡åˆ’
  - è¾“å‡ºå…·ä½“çš„æŠ•èµ„å»ºè®®å’Œæ‰§è¡Œç­–ç•¥
  - **è¾“å‡ºä¿å­˜**ï¼š\`trader_investment_plan\`

**âš ï¸ é£é™©è¯„ä¼°é˜¶æ®µ**ï¼ˆç ”ç©¶æ·±åº¦â‰¥3æ—¶æ‰§è¡Œï¼‰

- **ğŸ”¥ æ¿€è¿›é£é™©åˆ†æå¸ˆ (Risky Analyst)**
  - ä»é«˜é£é™©é«˜æ”¶ç›Šè§’åº¦åˆ†æ
  - è¾“å‡ºæ¿€è¿›ç­–ç•¥å»ºè®®
  - **è¾“å‡ºä¿å­˜**ï¼š\`risk_debate_state.risky_history\`

- **ğŸ›¡ï¸ ä¿å®ˆé£é™©åˆ†æå¸ˆ (Safe Analyst)**
  - ä»é£é™©æ§åˆ¶è§’åº¦åˆ†æ
  - è¾“å‡ºä¿å®ˆç­–ç•¥å»ºè®®
  - **è¾“å‡ºä¿å­˜**ï¼š\`risk_debate_state.safe_history\`

- **âš–ï¸ ä¸­æ€§é£é™©åˆ†æå¸ˆ (Neutral Analyst)**
  - ä»å¹³è¡¡è§’åº¦åˆ†æé£é™©
  - è¾“å‡ºå¹³è¡¡ç­–ç•¥å»ºè®®
  - **è¾“å‡ºä¿å­˜**ï¼š\`risk_debate_state.neutral_history\`

- **ğŸ¯ é£é™©ç»ç† (Risk Judge)**
  - ç»¼åˆå„æ–¹é£é™©è¯„ä¼°
  - åšå‡ºæœ€ç»ˆé£é™©å†³ç­–å’Œé£é™©è¯„çº§
  - **è¾“å‡ºä¿å­˜**ï¼š\`risk_debate_state.judge_decision\`ã€\`final_trade_decision\`

**ğŸ“¡ ä¿¡å·å¤„ç†é˜¶æ®µ**

- å¤„ç†æœ€ç»ˆäº¤æ˜“å†³ç­–ä¿¡å·
- æå–ç»“æ„åŒ–çš„æŠ•èµ„å»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰

#### **ç¬¬ä¸‰é˜¶æ®µï¼šç»“æœå¤„ç†ä¸ä¿å­˜** ğŸ“‹ (æ­¥éª¤10-12)

10. **å¤„ç†åˆ†æç»“æœ** ğŸ“Š
    - æå–é£é™©è¯„ä¼°æ•°æ®
    - è®°å½•Tokenä½¿ç”¨æƒ…å†µ
    - æ ¼å¼åŒ–åˆ†æç»“æœç”¨äºæ˜¾ç¤º

11. **è®°å½•å®Œæˆæ—¥å¿—** âœ…
    - è®°å½•åˆ†æå®Œæˆæ—¶é—´
    - è®¡ç®—æ€»è€—æ—¶å’Œæ€»æˆæœ¬

12. **ä¿å­˜åˆ†æç»“æœ** ğŸ’¾
    - **æœ¬åœ°æ–‡ä»¶ä¿å­˜**ï¼šä¿å­˜åˆ†æ¨¡å—æŠ¥å‘Šåˆ° \`results/{stock_symbol}/\` ç›®å½•
    - **MongoDBä¿å­˜**ï¼šä¿å­˜åˆ†ææŠ¥å‘Šåˆ°æ•°æ®åº“
    - **æ­¥éª¤è¾“å‡ºä¿å­˜**ï¼šæ¯æ­¥æ‰§è¡Œç»“æœå·²å®æ—¶ä¿å­˜åˆ° \`eval_results/{stock_symbol}/TradingAgentsStrategy_logs/step_outputs/{trade_date}/\`
      - æ¯ä¸ªæ­¥éª¤å•ç‹¬ä¿å­˜ï¼š\`step_0001.json\`, \`step_0002.json\`, ...
      - æ­¥éª¤æ±‡æ€»æ–‡ä»¶ï¼š\`steps_summary.json\`
      - æ‰€æœ‰æ­¥éª¤åˆå¹¶ï¼š\`all_steps.json\`

#### **ç¬¬å››é˜¶æ®µï¼šç»“æœå±•ç¤º** ğŸ“Š

- **å¯è§†åŒ–å›¾è¡¨**ï¼šä»·æ ¼èµ°åŠ¿ã€æŠ€æœ¯æŒ‡æ ‡å›¾è¡¨
- **æ•°æ®æŠ¥è¡¨**ï¼šå…³é”®æ•°æ®æ•´ç†å±•ç¤º
- **åˆ†æç»“è®º**ï¼šç»¼åˆè¯„åˆ†ä¸æŠ•èµ„å»ºè®®
- **è¯¦ç»†æ­¥éª¤æ—¥å¿—**ï¼šå¯æŸ¥çœ‹æ¯æ­¥æ‰§è¡Œè¯¦æƒ…
- **å†å²è®°å½•**ï¼šå¯æŸ¥çœ‹å†å²åˆ†æç»“æœ

---

### ğŸ”§ é«˜çº§åŠŸèƒ½è¯´æ˜

**æ­¥éª¤è¾“å‡ºè¿½è¸ª** ğŸ“
- ç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œè¾“å‡º
- æ‰€æœ‰æ­¥éª¤ä¿å­˜åœ¨ï¼š\`eval_results/{è‚¡ç¥¨ä»£ç }/TradingAgentsStrategy_logs/step_outputs/{æ—¥æœŸ}/\`
- å¯ç”¨äºè°ƒè¯•ã€åˆ†æä¼˜åŒ–å’Œç»“æœå›æº¯

**æ¨¡æ‹Ÿæ¨¡å¼æ”¯æŒ** ğŸ­
- æ”¯æŒèŠ‚ç‚¹çº§åˆ«çš„æ¨¡æ‹Ÿæ¨¡å¼é…ç½®ï¼ˆé€šè¿‡ \`.env\` æ–‡ä»¶ï¼‰
- æ¨¡æ‹Ÿæ¨¡å¼ä¼šä½¿ç”¨å†å²æ­¥éª¤è¾“å‡ºï¼ŒèŠ‚çœAPIæˆæœ¬
- é…ç½®ç¤ºä¾‹ï¼š\`MOCK_ANALYSIS_MODE=market,news\` æˆ– \`MOCK_ANALYSIS_MODE=true\`

**ç ”ç©¶æ·±åº¦è¯´æ˜** ğŸ“Š
- **1çº§ï¼ˆå¿«é€Ÿï¼‰**ï¼šä»…æ‰§è¡Œåˆ†æå¸ˆå›¢é˜Ÿï¼Œæ— ç ”ç©¶å‘˜è¾©è®ºå’Œè¯¦ç»†é£é™©è¯„ä¼°
- **2çº§ï¼ˆåŸºç¡€ï¼‰**ï¼šåŒ…å«ç ”ç©¶å‘˜è¾©è®ºé˜¶æ®µ
- **3çº§ï¼ˆæ ‡å‡†ï¼‰**ï¼šåŒ…å«å®Œæ•´çš„ç ”ç©¶å‘˜è¾©è®ºå’Œé£é™©è¯„ä¼°å›¢é˜Ÿ
- **4-5çº§ï¼ˆæ·±åº¦ï¼‰**ï¼šæ›´æ·±å…¥çš„åˆ†æå’Œå¤šæ¬¡è¿­ä»£è®¨è®º

ğŸ’¡ **æç¤º**ï¼šç ”ç©¶æ·±åº¦è¶Šé«˜ï¼Œåˆ†æè¶Šè¯¦ç»†ï¼Œä½†è€—æ—¶ä¹Ÿè¶Šé•¿ã€‚å»ºè®®é¦–æ¬¡åˆ†æä½¿ç”¨3çº§æ ‡å‡†åˆ†æã€‚`)

const renderedContent = computed(() => {
  const html = marked.parse(markdownContent.value)
  return DOMPurify.sanitize(html)
})
</script>

<style>
/* 
 * æ ·å¼è¯´æ˜ï¼š
 * - æ‰€æœ‰ markdown æ¸²æŸ“æ ·å¼ï¼ˆ.report-content, .markdown-content, .report-header ç­‰ï¼‰
 *   éƒ½æ¥è‡ªå¤–éƒ¨æ ·å¼æ–‡ä»¶ï¼šmarkdown-render-paper.css
 * - è¿™é‡Œåªä¿ç•™ç»„ä»¶å®¹å™¨çš„åŸºç¡€æ ·å¼å’Œå“åº”å¼è°ƒæ•´
 */
.analysis-process-page {
  max-width: 100%;
  margin: 0;
}

/* å“åº”å¼è°ƒæ•´ï¼šç§»åŠ¨ç«¯å‡å°‘å†…è¾¹è· */
@media (max-width: 768px) {
  .analysis-process-page .report-content {
    padding: 1.5rem !important;
  }
}
</style>

