# TradingAgents News Module - 设计文档

## 概述

News 模块是 TradingAgents-CN 项目的模块化新闻数据获取系统,支持A股、港股、美股等多个市场的新闻数据获取。本模块采用模块化设计,支持多数据源聚合、配置管理、缓存优化等功能。

**版本**: 1.0.0  
**创建日期**: 2025-11-26  
**文档类型**: 设计文档

## 目录

- [架构设计](#架构设计)
- [核心组件](#核心组件)
- [数据源分析](#数据源分析)
- [配置管理](#配置管理)
- [对外接口](#对外接口)
- [使用示例](#使用示例)
- [性能优化](#性能优化)
- [扩展指南](#扩展指南)

## 架构设计

### 整体架构

```
┌─────────────────────────────────────────────────────────┐
│                    News Module                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌──────────────┐      ┌──────────────┐               │
│  │   Config     │      │   Models     │               │
│  │  Management  │      │  (Data Types)│               │
│  └──────────────┘      └──────────────┘               │
│                                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │            News Aggregator                       │  │
│  │  (统一接口 + 多源聚合 + 去重过滤)                 │  │
│  └──────────────────────────────────────────────────┘  │
│                         │                               │
│         ┌───────────────┼───────────────┐              │
│         │               │               │              │
│  ┌──────▼─────┐  ┌─────▼──────┐ ┌─────▼──────┐       │
│  │  Tushare   │  │  AKShare   │ │  FinnHub   │       │
│  │  Provider  │  │  Provider  │ │  Provider  │  ...  │
│  └────────────┘  └────────────┘ └────────────┘       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 设计原则

1. **模块化**: 每个组件职责单一,易于维护和扩展
2. **可配置**: 通过环境变量灵活配置数据源和参数
3. **多源聚合**: 支持多个数据源,自动选择最佳数据源
4. **容错性**: 单个数据源失败不影响整体功能
5. **类型安全**: 使用数据类和枚举确保类型安全

## 核心组件

### 1. 数据模型 (`models.py`)

#### MarketType (市场类型枚举)

```python
class MarketType(Enum):
    A_SHARE = "A股"      # 中国A股
    HK_SHARE = "港股"    # 香港股票
    US_SHARE = "美股"    # 美国股票
    UNKNOWN = "未知"
```

#### NewsSource (新闻来源枚举)

```python
class NewsSource(Enum):
    TUSHARE = "Tushare"
    AKSHARE = "AKShare"
    FINNHUB = "FinnHub"
    EODHD = "EODHD"
    NEWSAPI = "NewsAPI"
    ALPHA_VANTAGE = "Alpha Vantage"
    GOOGLE_NEWS = "Google News"
    DONGFANG_FORTUNE = "东方财富"
    SINA_FINANCE = "新浪财经"
    CLS_RSS = "财联社"
    UNKNOWN = "未知"
```

#### NewsItem (新闻项)

核心数据结构,包含:
- `title`: 新闻标题
- `content`: 新闻内容
- `source`: 新闻来源
- `publish_time`: 发布时间
- `url`: 新闻链接
- `urgency`: 紧急程度 (high/medium/low)
- `relevance_score`: 相关性分数 (0.0-1.0)
- `stock_code`: 关联股票代码
- `keywords`: 关键词列表
- `sentiment`: 情绪分析

#### NewsQuery (查询参数)

查询参数封装:
- `stock_code`: 股票代码
- `start_date`: 开始日期
- `end_date`: 结束日期
- `max_news`: 最大新闻数量
- `hours_back`: 回溯小时数
- `market_type`: 市场类型
- `sources`: 指定新闻来源
- `min_relevance`: 最小相关性分数

#### NewsResponse (响应数据)

响应数据封装:
- `news_items`: 新闻项目列表
- `total_count`: 总数量
- `query`: 查询参数
- `sources_used`: 实际使用的数据源
- `fetch_time`: 获取时间
- `success`: 是否成功
- `error_message`: 错误信息

### 2. 配置管理 (`config.py`)

#### NewsConfig (配置数据类)

包含所有配置项:

**API 密钥**:
- `newsapi_key`
- `alpha_vantage_key`
- `finnhub_key`
- `tushare_token`
- `eodhd_token`

**数据源启用状态**:
- `finnhub_enabled`
- `alpha_vantage_enabled`
- `newsapi_enabled`
- `tushare_enabled`
- `akshare_enabled`
- `eodhd_enabled`
- `cls_rss_enabled`
- `google_news_enabled`

**获取配置**:
- `default_hours_back`: 默认回溯时间 (小时)
- `default_max_news`: 默认最大新闻数
- `relevance_threshold`: 相关性阈值
- `freshness_threshold`: 时效性阈值 (分钟)

**缓存配置**:
- `cache_enabled`: 是否启用缓存
- `cache_expiry`: 缓存过期时间 (秒)
- `cache_dir`: 缓存目录

**日志配置**:
- `log_level`: 日志级别
- `verbose_logging`: 详细日志

**高级配置**:
- `request_timeout`: 请求超时时间
- `max_retries`: 最大重试次数
- `retry_delay`: 重试延迟
- `rate_limit`: 请求限流

#### NewsConfigManager (配置管理器)

功能:
- 加载环境变量
- 管理配置生命周期
- 提供配置访问接口
- 支持配置重载
- 打印配置信息(调试用)

使用模块化环境变量加载器 (`tradingagents.utils.env_loader.ModularEnvLoader`),支持:
- 全局配置 (项目根目录 `.env`)
- 模块配置 (`tradingagents/news/.env`)
- 配置优先级: 模块级 > 全局级 > 默认值

### 3. 新闻提供者 (`providers.py`)

#### NewsProvider (基类)

抽象基类,定义提供者接口:

```python
class NewsProvider(ABC):
    @abstractmethod
    def get_news(...) -> List[NewsItem]:
        """获取新闻数据"""
        pass
    
    @abstractmethod
    def is_available() -> bool:
        """检查数据源是否可用"""
        pass
    
    def identify_market_type(stock_code: str) -> MarketType:
        """识别股票市场类型"""
        pass
    
    def assess_urgency(title: str, content: str) -> NewsUrgency:
        """评估新闻紧急程度"""
        pass
    
    def calculate_relevance(title: str, stock_code: str) -> float:
        """计算新闻相关性分数"""
        pass
```

#### 具体提供者实现

##### TushareNewsProvider
- **适用市场**: A股
- **优势**: 专业金融数据,数据质量高
- **要求**: Tushare Token
- **优先级**: A股第二选择

##### AKShareNewsProvider
- **适用市场**: A股
- **优势**: 免费,无需注册,数据丰富
- **要求**: 无
- **优先级**: A股首选

##### FinnhubNewsProvider
- **适用市场**: 美股
- **优势**: 实时数据,覆盖全球60+交易所
- **要求**: FinnHub API Key
- **优先级**: 美股首选

##### EODHDNewsProvider
- **适用市场**: 港股、美股
- **优势**: 支持48个全球交易所,新闻聚合
- **要求**: EODHD API Token
- **优先级**: 港股首选,美股备选

### 4. 新闻聚合器 (`aggregator.py`)

#### NewsAggregator (聚合器)

核心功能:

1. **多源聚合**: 从多个数据源获取新闻
2. **智能选择**: 根据市场类型选择最佳数据源
3. **去重过滤**: 去除重复新闻,过滤低相关性新闻
4. **排序限制**: 按时间排序,限制数量

工作流程:

```
1. 接收查询参数
   ↓
2. 识别市场类型 (A股/港股/美股)
   ↓
3. 选择合适的提供者
   ↓
4. 从各提供者获取新闻
   ↓
5. 去重 (基于标题)
   ↓
6. 过滤 (相关性阈值)
   ↓
7. 排序 (按时间倒序)
   ↓
8. 限制数量
   ↓
9. 返回 NewsResponse
```

#### 数据源选择策略

**A股**:
```
优先级: AKShare > Tushare
```

**港股**:
```
优先级: EODHD > FinnHub
```

**美股**:
```
优先级: FinnHub > EODHD
```

## 数据源分析

### A股新闻数据源对比

基于 `docs/news/news1.md`, `docs/news/news2.md`, `docs/news/news3.md` 的分析:

| 数据源 | A股支持 | 成本 | 数据质量 | 中文支持 | 推荐指数 |
|--------|---------|------|----------|----------|----------|
| **Tushare Pro** | ✅ 优秀 | 低/免费 | 高 | ✅ 完善 | ⭐⭐⭐⭐⭐ |
| **AKShare** | ✅ 优秀 | 免费 | 良好 | ✅ 完善 | ⭐⭐⭐⭐⭐ |
| **Wind 万得** | ✅ 优秀 | 很高 | 最高 | ✅ 完善 | ⭐⭐⭐⭐ |
| **同花顺 iFinD** | ✅ 优秀 | 较高 | 高 | ✅ 完善 | ⭐⭐⭐⭐ |
| **东方财富 Choice** | ✅ 良好 | 中等 | 良好 | ✅ 完善 | ⭐⭐⭐⭐ |
| **巨潮资讯网** | ✅ 优秀(公告) | 免费 | 最权威 | ✅ 完善 | ⭐⭐⭐⭐ |
| **新浪/腾讯财经** | ✅ 良好 | 免费 | 一般 | ✅ 完善 | ⭐⭐⭐ |
| **Finnhub API** | ❌ 不支持 | 中等 | 高(美股) | ❌ 无 | ⭐ |
| **Alpha Vantage** | ⚠️ 很有限 | 低/免费 | 中等 | ❌ 很少 | ⭐⭐ |
| **NewsAPI** | ⚠️ 有限 | 低/免费 | 中等 | ⚠️ 部分 | ⭐⭐ |
| **EODHD API** | ⚠️ 有限 | 中等 | 良好 | ❌ 很少 | ⭐⭐ |
| **Google News** | ⚠️ 非常有限 | 免费 | 一般 | ⚠️ 部分 | ⭐⭐ |

### 推荐方案

#### 免费方案 (个人/小规模)
```
AKShare + Tushare Pro(基础版) + 巨潮资讯网(公告)
```

#### 付费方案 (预算有限)
```
同花顺 iFinD + Tushare Pro
```

#### 专业机构方案
```
Wind 万得 (全能型)
```

#### 混合方案 (推荐)
```
Tushare Pro(基础数据) + 东方财富/同花顺(新闻研报) + 巨潮资讯网(官方公告)
```

### 为什么国际数据源不适合A股?

1. **语言障碍**: 主要提供英文新闻,中文支持很少
2. **市场覆盖**: 专注美股和国际市场,A股不是重点
3. **数据结构**: 无法按A股股票代码直接关联新闻
4. **数据源**: 缺乏东方财富、同花顺等本土财经媒体
5. **时效性**: 对A股市场的报道时效性远低于本土平台
6. **专业性**: 缺乏A股特有的公告、研报、股吧等数据

### 为什么本土数据源更适合A股?

1. **原生中文**: 所有数据都是中文,无需翻译
2. **股票代码关联**: 直接支持按股票代码查询相关新闻
3. **数据源丰富**: 聚合所有主要中文财经媒体
4. **实时性强**: 7×24小时跟踪A股相关资讯
5. **专业数据**: 包含研报、公告、股吧消息等A股特有内容
6. **政策敏感**: 及时跟踪监管政策、行业动态

## 配置管理

### 环境变量配置

News 模块支持模块化环境变量配置,可以在以下位置创建 `.env` 文件:

1. **全局配置**: `TradingAgents/.env`
2. **模块配置**: `TradingAgents/tradingagents/news/.env`

配置优先级: **模块配置 > 全局配置 > 默认值**

### 配置文件示例

创建 `tradingagents/news/.env`:

```bash
# News 模块环境变量配置

# ===== API 密钥 =====
NEWSAPI_KEY=your_newsapi_key_here
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key_here
FINNHUB_API_KEY=your_finnhub_key_here
TUSHARE_TOKEN=your_tushare_token_here
EODHD_API_TOKEN=your_eodhd_token_here

# ===== 数据源启用状态 =====
NEWS_FINNHUB_ENABLED=true
NEWS_ALPHA_VANTAGE_ENABLED=false
NEWS_NEWSAPI_ENABLED=false
NEWS_TUSHARE_ENABLED=true
NEWS_AKSHARE_ENABLED=true
NEWS_EODHD_ENABLED=false
NEWS_CLS_RSS_ENABLED=true
NEWS_GOOGLE_NEWS_ENABLED=false

# ===== 获取配置 =====
NEWS_DEFAULT_HOURS_BACK=6
NEWS_DEFAULT_MAX_NEWS=10
NEWS_RELEVANCE_THRESHOLD=0.3
NEWS_FRESHNESS_THRESHOLD=60

# ===== 缓存配置 =====
NEWS_CACHE_ENABLED=true
NEWS_CACHE_EXPIRY=1800
NEWS_CACHE_DIR=./cache/news

# ===== 日志配置 =====
NEWS_LOG_LEVEL=INFO
NEWS_VERBOSE_LOGGING=false

# ===== 高级配置 =====
NEWS_REQUEST_TIMEOUT=10
NEWS_MAX_RETRIES=3
NEWS_RETRY_DELAY=1
NEWS_RATE_LIMIT=5
```

### 配置加载

```python
from tradingagents.news.config import get_news_config, get_news_config_manager

# 方式 1: 直接获取配置
config = get_news_config()

# 方式 2: 获取配置管理器
config_manager = get_news_config_manager(verbose=True)
config = config_manager.get_config()

# 打印配置(调试用)
config_manager.print_config()

# 重新加载配置
config_manager.reload_config()
```

## 对外接口

### 主要接口

#### 1. get_stock_news (便捷函数)

**签名**:
```python
def get_stock_news(
    stock_code: str,
    start_date: Optional[str] = None,
    end_date: Optional[str] = None,
    max_news: int = 10,
    hours_back: int = 6,
    sources: Optional[List[NewsSource]] = None,
    min_relevance: float = 0.3
) -> NewsResponse
```

**参数**:
- `stock_code`: 股票代码 (必需)
  - A股: `000002`, `600000`, `SH600000`
  - 港股: `0700.HK`, `0700`
  - 美股: `AAPL`, `TSLA`
- `start_date`: 开始日期 (YYYY-MM-DD)
- `end_date`: 结束日期 (YYYY-MM-DD)
- `max_news`: 最大新闻数量
- `hours_back`: 回溯小时数
- `sources`: 指定数据源列表
- `min_relevance`: 最小相关性分数

**返回**:
- `NewsResponse` 对象,包含:
  - `news_items`: 新闻列表
  - `total_count`: 总数量
  - `query`: 查询参数
  - `sources_used`: 使用的数据源
  - `fetch_time`: 获取时间
  - `success`: 是否成功
  - `error_message`: 错误信息

**示例**:
```python
from tradingagents.news import get_stock_news

# 获取A股新闻
response = get_stock_news("000002", max_news=10)

# 获取港股新闻
response = get_stock_news("0700.HK", max_news=5, hours_back=24)

# 获取美股新闻
response = get_stock_news("AAPL", max_news=20, hours_back=48)

# 指定日期范围
response = get_stock_news(
    "000002",
    start_date="2025-11-20",
    end_date="2025-11-26",
    max_news=15
)

# 指定数据源
from tradingagents.news.models import NewsSource
response = get_stock_news(
    "000002",
    sources=[NewsSource.AKSHARE, NewsSource.TUSHARE]
)

# 处理响应
if response.success:
    print(f"获取到 {response.total_count} 条新闻")
    for news in response.news_items:
        print(f"[{news.source.value}] {news.title}")
        print(f"  时间: {news.publish_time}")
        print(f"  相关性: {news.relevance_score}")
else:
    print(f"获取失败: {response.error_message}")

# 格式化报告
report = response.format_report()
print(report)
```

#### 2. NewsAggregator (聚合器类)

**签名**:
```python
class NewsAggregator:
    def __init__(self)
    
    def get_news(
        self,
        stock_code: str,
        start_date: Optional[str] = None,
        end_date: Optional[str] = None,
        max_news: int = None,
        hours_back: int = None,
        sources: Optional[List[NewsSource]] = None,
        min_relevance: float = None
    ) -> NewsResponse
```

**示例**:
```python
from tradingagents.news.aggregator import NewsAggregator

# 创建聚合器
aggregator = NewsAggregator()

# 获取新闻
response = aggregator.get_news(
    stock_code="000002",
    max_news=10
)

# 查看可用提供者
print(f"可用提供者: {len(aggregator.providers)}")
for provider in aggregator.providers:
    print(f"  - {provider.source.value}")
```

#### 3. NewsProvider (提供者类)

**基类**:
```python
class NewsProvider(ABC):
    @abstractmethod
    def get_news(...) -> List[NewsItem]
    
    @abstractmethod
    def is_available() -> bool
```

**具体提供者**:
```python
from tradingagents.news.providers import (
    AKShareNewsProvider,
    TushareNewsProvider,
    FinnhubNewsProvider,
    EODHDNewsProvider
)

# 创建提供者
provider = AKShareNewsProvider()

# 检查可用性
if provider.is_available():
    # 获取新闻
    news_items = provider.get_news(
        stock_code="000002",
        max_news=10
    )
```

### 数据模型接口

#### NewsItem

```python
from tradingagents.news.models import NewsItem, NewsSource, NewsUrgency
from datetime import datetime

# 创建新闻项
news = NewsItem(
    title="测试新闻",
    content="新闻内容",
    source=NewsSource.AKSHARE,
    publish_time=datetime.now(),
    url="https://example.com",
    urgency=NewsUrgency.MEDIUM,
    relevance_score=0.8,
    stock_code="000002"
)

# 转换为字典
news_dict = news.to_dict()

# 从字典创建
news2 = NewsItem.from_dict(news_dict)
```

#### NewsQuery

```python
from tradingagents.news.models import NewsQuery

# 创建查询
query = NewsQuery(
    stock_code="000002",
    max_news=10,
    hours_back=6
)

# 转换为字典
query_dict = query.to_dict()
```

#### NewsResponse

```python
# 响应对象
response = get_stock_news("000002")

# 访问属性
print(response.success)
print(response.total_count)
print(response.news_items)
print(response.sources_used)

# 转换为字典
response_dict = response.to_dict()

# 格式化报告
report = response.format_report()
```

## 使用示例

### 示例 1: 基本使用

```python
from tradingagents.news import get_stock_news

# 获取A股新闻
response = get_stock_news("000002", max_news=10)

if response.success:
    for news in response.news_items:
        print(f"{news.title}")
        print(f"  来源: {news.source.value}")
        print(f"  时间: {news.publish_time}")
        print()
```

### 示例 2: 指定日期范围

```python
from tradingagents.news import get_stock_news

response = get_stock_news(
    stock_code="600000",
    start_date="2025-11-20",
    end_date="2025-11-26",
    max_news=20
)

print(f"获取到 {response.total_count} 条新闻")
```

### 示例 3: 指定数据源

```python
from tradingagents.news import get_stock_news
from tradingagents.news.models import NewsSource

# 只使用 AKShare
response = get_stock_news(
    "000002",
    sources=[NewsSource.AKSHARE]
)

# 使用多个数据源
response = get_stock_news(
    "000002",
    sources=[NewsSource.AKSHARE, NewsSource.TUSHARE]
)
```

### 示例 4: 不同市场

```python
from tradingagents.news import get_stock_news

# A股
a_share_news = get_stock_news("000002")

# 港股
hk_share_news = get_stock_news("0700.HK")

# 美股
us_share_news = get_stock_news("AAPL")
```

### 示例 5: 使用聚合器

```python
from tradingagents.news.aggregator import NewsAggregator

aggregator = NewsAggregator()

# 查看可用提供者
print("可用数据源:")
for provider in aggregator.providers:
    print(f"  - {provider.source.value}")

# 获取新闻
response = aggregator.get_news("000002", max_news=10)
```

### 示例 6: 配置管理

```python
from tradingagents.news.config import get_news_config_manager

# 获取配置管理器
config_manager = get_news_config_manager(verbose=True)

# 打印配置
config_manager.print_config()

# 获取配置
config = config_manager.get_config()

print(f"默认回溯时间: {config.default_hours_back} 小时")
print(f"AKShare 启用: {config.akshare_enabled}")
```

### 示例 7: 格式化报告

```python
from tradingagents.news import get_stock_news

response = get_stock_news("000002", max_news=10)

# 生成格式化报告
report = response.format_report()

# 保存到文件
with open("news_report.md", "w", encoding="utf-8") as f:
    f.write(report)

print("报告已保存到 news_report.md")
```

## 性能优化

### 1. 缓存机制

**配置**:
```bash
NEWS_CACHE_ENABLED=true
NEWS_CACHE_EXPIRY=1800  # 30分钟
NEWS_CACHE_DIR=./cache/news
```

**实现** (待实现):
- 基于股票代码和日期的缓存键
- 自动过期清理
- 支持手动刷新

### 2. 并发获取

**策略**:
- 多个数据源并发请求
- 使用线程池或异步IO
- 超时控制

### 3. 请求限流

**配置**:
```bash
NEWS_RATE_LIMIT=5  # 每秒最多5个请求
NEWS_REQUEST_TIMEOUT=10  # 10秒超时
NEWS_MAX_RETRIES=3  # 最多重试3次
```

### 4. 数据源选择优化

**策略**:
- 根据市场类型选择最佳数据源
- 优先使用免费、稳定的数据源
- 失败后自动降级

### 5. 去重优化

**方法**:
- 基于标题的快速去重
- 使用集合(set)提高查找效率
- 过滤标题过短的新闻

## 扩展指南

### 添加新的数据源

#### 步骤 1: 创建提供者类

在 `providers.py` 中添加:

```python
class NewProviderNewsProvider(NewsProvider):
    """新数据源提供者"""
    
    def __init__(self):
        super().__init__(NewsSource.NEW_PROVIDER)
        self._check_connection()
    
    def _check_connection(self):
        """检查连接状态"""
        # 检查API密钥等
        self.connected = True
    
    def is_available(self) -> bool:
        return self.connected
    
    def get_news(
        self,
        stock_code: str,
        start_date: Optional[str] = None,
        end_date: Optional[str] = None,
        max_news: int = 10
    ) -> List[NewsItem]:
        """获取新闻"""
        # 实现新闻获取逻辑
        pass
```

#### 步骤 2: 添加到枚举

在 `models.py` 中添加:

```python
class NewsSource(Enum):
    # ... 现有来源
    NEW_PROVIDER = "新数据源"
```

#### 步骤 3: 注册到聚合器

在 `aggregator.py` 的 `_init_providers` 中添加:

```python
def _init_providers(self):
    all_providers = [
        # ... 现有提供者
        NewProviderNewsProvider(),
    ]
    # ...
```

#### 步骤 4: 添加配置

在 `config.py` 中添加:

```python
@dataclass
class NewsConfig:
    # ... 现有配置
    new_provider_key: Optional[str] = None
    new_provider_enabled: bool = False
```

在 `_load_config` 中添加:

```python
config.new_provider_key = self.env_loader.get_env('NEW_PROVIDER_API_KEY')
config.new_provider_enabled = self.env_loader.get_env_bool('NEWS_NEW_PROVIDER_ENABLED', False)
```

### 添加新功能

#### 情绪分析

```python
def analyze_sentiment(self, title: str, content: str) -> str:
    """分析新闻情绪"""
    # 使用NLP模型分析情绪
    # 返回 'positive', 'negative', 'neutral'
    pass
```

#### 关键词提取

```python
def extract_keywords(self, title: str, content: str) -> List[str]:
    """提取关键词"""
    # 使用TF-IDF或其他方法提取关键词
    pass
```

#### 新闻摘要

```python
def summarize_news(self, content: str, max_length: int = 200) -> str:
    """生成新闻摘要"""
    # 使用摘要算法生成简短摘要
    pass
```

## 测试

### 运行测试

```bash
# 使用虚拟环境的 Python
.venv\Scripts\python.exe tradingagents\news\test_news.py
```

### 测试覆盖

测试文件 `test_news.py` 包含:

1. ✅ 配置管理器测试
2. ✅ 数据模型测试
3. ✅ 新闻提供者测试
4. ✅ 新闻聚合器测试
5. ✅ 便捷函数测试
6. ✅ 市场类型选择测试

## 注意事项

### 1. 与现有代码的兼容性

⚠️ **重要**: 本模块是新的独立模块,**不影响**现有的新闻获取函数:
- `tradingagents/dataflows/realtime_news_utils.py`
- `tradingagents/tools/unified_news_tool.py`
- `tradingagents/agents/analysts/news_analyst.py`

现有代码继续使用原有接口,新代码可以选择使用新的 `tradingagents.news` 模块。

### 2. API 密钥安全

- 不要将 `.env` 文件提交到 Git
- 使用 `.env.example` 作为模板
- 定期更换 API 密钥

### 3. 数据源限制

- 注意各数据源的调用频率限制
- 免费版本可能有功能限制
- 部分数据源需要付费订阅

### 4. 错误处理

- 单个数据源失败不影响整体功能
- 所有数据源失败时返回错误响应
- 详细的日志记录便于调试

## 未来规划

### 短期 (1-2个月)

- [ ] 实现缓存机制
- [ ] 添加并发获取支持
- [ ] 完善错误处理和重试逻辑
- [ ] 添加更多数据源 (NewsAPI, Alpha Vantage)
- [ ] 实现情绪分析功能

### 中期 (3-6个月)

- [ ] 添加新闻摘要功能
- [ ] 实现关键词提取
- [ ] 支持新闻分类
- [ ] 添加新闻推荐算法
- [ ] 实现新闻去重的高级算法

### 长期 (6个月以上)

- [ ] 集成机器学习模型
- [ ] 实现实时新闻流
- [ ] 添加新闻影响力评分
- [ ] 支持多语言新闻
- [ ] 构建新闻知识图谱

## 参考文档

- [新闻接口定义](../../../docs/news/news_func_def.md)
- [新闻数据源分析1](../../../docs/news/news1.md)
- [新闻数据源分析2](../../../docs/news/news2.md)
- [新闻数据源分析3](../../../docs/news/news3.md)
- [模块化环境变量配置](../../../docs/modular_env_config.md)

## 贡献指南

欢迎贡献代码和建议!

### 贡献方式

1. Fork 项目
2. 创建功能分支
3. 提交代码
4. 创建 Pull Request

### 代码规范

- 遵循 PEP 8
- 添加类型提示
- 编写文档字符串
- 添加单元测试

## 许可证

本模块遵循 TradingAgents-CN 项目的许可证。

## 联系方式

如有问题或建议,请通过以下方式联系:

- 提交 Issue
- 发送 Pull Request
- 项目讨论区

---

**文档版本**: 1.0.0  
**最后更新**: 2025-11-26  
**维护者**: TradingAgents-CN Team
